{% comment %} {% extends "base.html" %} {% endcomment %}

{% block content %}
  <h2>Verify OTP</h2>
  <form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Verify OTP</button>
  </form>

  {% if remaining_time > 0 %}
    <div id="otp-timer">
      <p>OTP expires in: <span id="timer">{{ remaining_time|floatformat:0 }}</span> seconds</p>
    </div>
    <script>
      // Get the remaining time from the server
      var remainingTime = parseFloat(document.getElementById('timer').textContent);

      function updateTimer() {
        remainingTime--;
        document.getElementById('timer').textContent = remainingTime;

        if (remainingTime <= 0) {
          document.getElementById('otp-timer').innerHTML = '<p>OTP has expired. Please request a new one.</p>';
        }
      }

      // Update the timer every second
      setInterval(updateTimer, 1000);
    </script>
  {% else %}
    <p>OTP has expired. Please request a new one.</p>
  {% endif %}
{% endblock %}
